<!doctype html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8" />
        <title>访问日志</title>
        <style>
            table {
                width: 100%;
                border-collapse: collapse;
                margin: 20px 0;
            }
            th,
            td {
                border: 1px solid #ccc;
                padding: 10px;
                text-align: left;
            }
            th {
                background-color: #f5f5f5;
            }
            .params {
                color: #666;
                font-size: 12px;
            }
        </style>
    </head>
    <body>
        <h1>访问日志（最新 {{ logs|length }} 条）</h1>
        <table>
            <thead>
                <tr>
                    <th>时间</th>
                    <th>IP</th>
                    <th>请求方法</th>
                    <th>请求路径</th>
                    <th>查询参数</th>
                    <th>请求体参数</th>
                    <th>响应状态码</th>
                    <th>耗时（ms）</th>
                </tr>
            </thead>
            <tbody>
                {% for log in logs %}
                <tr>
                    <td>{{ log.time }}</td>
                    <td>{{ log.ip }}</td>
                    <td>{{ log.method }}</td>
                    <td>{{ log.path }}</td>
                    <td class="params">
                        {% if log.query_params %} {{ log.query_params|tojson }} {% else %} 无 {% endif %}
                    </td>
                    <td class="params">
                        {% if log.body_params %} {{ log.body_params|tojson }} {% else %} 无 {% endif %}
                    </td>
                    <td>{{ log.status }}</td>
                    <td>{{ log.cost_ms }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </body>
</html>
